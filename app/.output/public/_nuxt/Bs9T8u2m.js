import{m as E,r as p,n as U,p as F,q as I,g as D,v as M,x as P,k as u,o as v,c as x,y as O,z as J,b as h,a as C,w as T,F as K,A as j,t as N,B as A,C as B,d as q}from"./BX-1KC6r.js";import{i as L,S as R}from"./YpfM5CC5.js";import{B as G}from"./BhDW0JFv.js";import{c as H}from"./gtHh74rt.js";function Q(o){return JSON.parse(JSON.stringify(o))}function W(o,t,s,i={}){var l,d,n;const{clone:e=!1,passive:$=!1,eventName:k,deep:b=!1,defaultValue:z,shouldEmit:_}=i,r=E(),y=s||r?.emit||((l=r?.$emit)==null?void 0:l.bind(r))||((n=(d=r?.proxy)==null?void 0:d.$emit)==null?void 0:n.bind(r?.proxy));let c=k;c=c||`update:${t.toString()}`;const V=a=>e?typeof e=="function"?e(a):Q(a):a,w=()=>L(o[t])?V(o[t]):z,S=a=>{_?_(a)&&y(c,a):y(c,a)};if($){const a=w(),g=p(a);let m=!1;return U(()=>o[t],f=>{m||(m=!0,g.value=V(f),I(()=>m=!1))}),U(g,f=>{!m&&(f!==o[t]||b)&&S(f)},{deep:b}),g}else return F({get(){return w()},set(a){S(a)}})}const X=D({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(o,{emit:t}){const s=o,l=W(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(d,n)=>M((v(),x("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>J(l)?l.value=e:null),"data-slot":"textarea",class:O(u(H)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s.class))},null,2)),[[P,u(l)]])}}),Y=Object.assign(X,{__name:"UiTextarea"}),Z={class:"flex flex-col h-[calc(100vh-56px)]"},ee={class:"flex gap-2"},te=D({__name:"ChatPanelShadcn",setup(o){const t=p(""),s=p(!1),i=p([]),l=async()=>{if(!t.value.trim())return;const d=t.value.trim();t.value="",s.value=!0;const n={id:crypto.randomUUID(),role:"user",content:d};i.value.push(n);try{const e=await $fetch("/api/aaasaasa/chat",{method:"POST",body:{session_id:"default",profile:"local-ollama",prompt:d}});e?.text&&i.value.push({id:crypto.randomUUID(),role:"assistant",content:e.text})}catch(e){i.value.push({id:crypto.randomUUID(),role:"assistant",content:"⚠️ Error: "+e?.message||e})}finally{s.value=!1}};return(d,n)=>(v(),x("div",Z,[h(u(R),{class:"flex-1 p-4 space-y-4 overflow-y-auto"},{default:T(()=>[(v(!0),x(K,null,j(i.value,e=>(v(),x("div",{key:e.id,class:O(["text-sm whitespace-pre-wrap",e.role==="user"?"text-right text-foreground font-medium":"text-left text-muted-foreground"])},N(e.content),3))),128))]),_:1}),C("form",{onSubmit:B(l,["prevent"]),class:"p-4 border-t bg-background"},[C("div",ee,[h(u(Y),{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=e=>t.value=e),placeholder:"Type your message...",rows:"1",class:"flex-1 resize-none min-h-[36px]",onKeydown:A(B(l,["exact","prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),h(u(G),{type:"submit",disabled:s.value||!t.value.trim()},{default:T(()=>[q(N(s.value?"...":"Send"),1)]),_:1},8,["disabled"])])],32)]))}}),le=Object.assign(te,{__name:"ChatPanelShadcn"});export{le as C};
